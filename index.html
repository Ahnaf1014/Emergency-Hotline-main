<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Emergency Service Directory</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#effef6',
              100: '#d7fde9',
              200: '#b0f8d2',
              300: '#79efb4',
              400: '#42e094',
              500: '#19c377',
              600: '#0ea562',
              700: '#0c8552',
              800: '#0e6a44',
              900: '#0f5539',
            }
          },
          boxShadow: {
            soft: '0 6px 20px rgba(16,24,40,.06)'
          }
        }
      }
    }
  </script>
  <style>
    button {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
</head>

<body class="bg-brand-50 text-gray-800">
  <!-- NAVBAR -->
  <header class="w-full border-b border-white/40 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 items-center justify-between">
        <a href="#" class="flex items-center gap-3">
          <span class="inline-flex h-10 w-10 items-center justify-center rounded-full shadow-soft overflow-hidden">
            <img src="assets/logo.png" alt="Emergency Logo" class="h-full w-full object-cover" />
          </span>


          <div class="leading-5">
            <div class="text-base font-extrabold tracking-tight text-brand-600">Emergency</div>
            <div class="text-base font-extrabold tracking-tight text-brand-600">Service</div>
          </div>

        </a>
        <div class="flex items-center gap-3 sm:gap-4">
          <!-- Heart count -->
          <div
            class="flex items-center gap-1 rounded-full bg-brand-100 px-3 py-1 text-sm shadow-soft ring-1 ring-gray-200">
            <svg class="h-4 w-4 text-rose-500" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path
                d="M12 21s-7.2-4.35-9.6-8.1C.84 10.14 2.14 6.6 5.52 6.2c1.7-.2 3.3.6 4.48 1.92C11.66 6.8 13.3 6 15 6.2c3.36.4 4.68 3.94 3.12 6.7C19.2 16.65 12 21 12 21z" />
            </svg>
            <span id="heartCount" class="font-semibold">0</span>
          </div>

          <!-- Coin count -->
          <div
            class="flex items-center gap-1 rounded-full bg-brand-100 px-3 py-1 text-sm shadow-soft ring-1 ring-gray-200">
            <img src="assets/coin.png" alt="Coins" class="h-4 w-4 object-contain" />
            <span id="coinCount" class="font-semibold">100</span>
          </div>

          <!-- Copy count -->
          <div
            class="flex items-center gap-1 rounded-full bg-brand-600 px-3 py-1 text-sm shadow-soft ring-1 ring-gray-200 text-white">
            <span id="copyCount" class="font-semibold">0</span>
            <span class="text-xs">Copy</span>
          </div>
        </div>


      </div>
    </div>
  </header>

  <!-- HERO -->
  <section
    class="relative isolate overflow-hidden bg-gradient-to-br from-brand-900 via-brand-700 to-brand-500 text-white">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col items-center py-10 sm:py-12 lg:py-14">
        <!-- crest replaced with provided 'emergency' -->
        <span
          class="mb-4 inline-flex h-14 w-14 items-center justify-center rounded-full ring-1 ring-white/30 shadow-soft overflow-hidden">
          <img src="assets/logo-dark.png" alt="Emergency Crest" class="h-full w-full object-cover" />
        </span>


        <h1 class="text-center text-2xl font-extrabold sm:text-3xl lg:text-4xl">Emergency Service Directory</h1>
        <p class="mt-2 max-w-3xl text-center text-xs sm:text-sm text-white/90">Government Emergency Services at Your
          Fingertips â€” A Project by Government of the Peopleâ€™s Republic of Bangladesh</p>
      </div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="mx-auto max-w-7xl px-4 pb-12 pt-6 sm:px-6 lg:px-8">
    <div class="grid gap-6 lg:grid-cols-4 lg:items-start">
      <section class="lg:col-span-3">
        <div id="cards" class="grid gap-5 sm:grid-cols-2 xl:grid-cols-3"></div>
      </section>
      <aside class="lg:col-span-1">
        <div class="rounded-2xl bg-white p-4 shadow-soft ring-1 ring-gray-200">
          <div class="mb-2 flex items-center justify-between">
            <div class="flex items-center gap-2">
              <svg class="h-5 w-5 text-gray-700" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M8 7h8v2H8zM6 11h12v2H6zm2 4h8v2H8z" />
              </svg>
              <h2 class="text-sm font-semibold">Call History</h2>
            </div>
            <button id="clearHistory"
              class="inline-flex items-center gap-1 rounded-full bg-brand-600 px-3 py-1 text-xs font-semibold text-white hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2">Clear</button>
          </div>
          <ul id="historyList" class="mt-2 max-h-[560px] space-y-2 overflow-auto pr-1">
            <li class="text-xs text-gray-500">No calls yet. Make a call to see history.</li>
          </ul>
        </div>
      </aside>
    </div>
  </main>

  <script>
    const services = [
      { id: 'emergency', img: 'emergency.png', icon: 'ðŸ””', name: 'National Emergency Number', subtitle: 'National Emergency', number: '999', tag: 'All' },
      { id: 'police', img: 'police.png', icon: 'ðŸ‘®', name: 'Police Helpline Number', subtitle: 'Police', number: '999', tag: 'Police' },
      { id: 'fire-service', img: 'fire-service.png', icon: 'ðŸ”¥', name: 'Fire Service Number', subtitle: 'Fire Service', number: '999', tag: 'Fire' },
      { id: 'ambulance', img: 'ambulance.png', icon: 'ðŸš‘', name: 'Ambulance Service', subtitle: 'Ambulance', number: '1994-999999', tag: 'Health' },
      { id: 'women', img: 'emergency.png', icon: 'ðŸ‘©\u200dðŸ‘§', name: 'Women & Child Helpline', subtitle: 'Women & Child Helpline', number: '109', tag: 'Help' },
      { id: 'antiCorruption', img: 'emergency.png', icon: 'ðŸš«', name: 'Anti-Corruption Helpline', subtitle: 'Anti-Corruption', number: '106', tag: 'Govt.' },
      { id: 'electricity', img: 'emergency.png', icon: 'ðŸ’¡', name: 'Electricity Helpline', subtitle: 'Electricity Outage', number: '16216', tag: 'Electricity' },
      { id: 'brac', img: 'brac.png', icon: 'ðŸ¥', name: 'Brac Helpline', subtitle: 'Brac', number: '16445', tag: 'NGO' },
      { id: 'Bangladesh-Railway', img: 'Bangladesh-Railway.png', icon: 'ðŸš†', name: 'Bangladesh Railway Helpline', subtitle: 'Bangladesh Railway', number: '163', tag: 'Travel' }
    ];

    const favorites = new Set();
    let coins = 100;
    let copies = 0;

    const el = (id) => document.getElementById(id);
    const pad = (n) => String(n).padStart(2, '0');
    const formatTime = (d) => {
      let h = d.getHours();
      const m = d.getMinutes();
      const s = d.getSeconds();
      const am = h >= 12 ? 'PM' : 'AM';
      h = h % 12; if (h === 0) h = 12;
      return `${pad(h)}:${pad(m)}:${pad(s)} ${am}`;
    };

    function updateCounters() {
      el('heartCount').textContent = favorites.size;
      el('coinCount').textContent = coins;
      el('copyCount').textContent = copies;
    }

    // HEART SVG function - Kept exactly as original (no changes)
    function heartButtonSVG(active) {
      return active
        ? '<svg class="h-5 w-5 text-rose-500" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M12 21s-7.2-4.35-9.6-8.1C.84 10.14 2.14 6.6 5.52 6.2c1.7-.2 3.3.6 4.48 1.92C11.66 6.8 13.3 6 15 6.2c3.36.4 4.68 3.94 3.12 6.7C19.2 16.65 12 21 12 21z"/></svg>'
        : '<svg class="h-5 w-5 text-gray-400 group-hover:text-rose-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true"><path d="M12.1 20.3S4.9 16 2.5 12.2C.9 9.5 2.3 5.9 5.5 5.5c1.7-.2 3.4.6 4.6 2 1.2-1.4 2.9-2.2 4.6-2 3.2.4 4.6 3.9 3 6.7-2.4 3.9-9.6 8.1-9.6 8.1z"/></svg>';
    }

    function renderCards() {
      const container = el('cards');
      container.innerHTML = services.map(s => `
    <article class="group relative flex flex-col rounded-2xl bg-white p-4 shadow-soft ring-1 ring-gray-200">

      <!-- Top: Logo with favorite button overlay -->
      <div class="flex items-start mb-2 relative">
        <span class="inline-flex h-12 w-12 items-center justify-center rounded-md overflow-hidden
          ${s.id === 'police' ? 'bg-brand-100' : 'bg-rose-100'}">
          <img src="assets/${s.img}" alt="${s.name}" class="h-8 w-8 object-contain" />
        </span>

        <!-- Favorite button inside the logo area -->
        <button class="favorite-btn absolute top-0 right-0 rounded-full p-1 transition bg-white/90 shadow-sm" 
                data-id="${s.id}" aria-label="Toggle favorite" title="Favorite">
          ${heartButtonSVG(favorites.has(s.id))}
        </button>
      </div>

      <!-- Title + subtitle below logo -->
      <div class="flex flex-col justify-start ml-0 mb-3">
        <h3 class="text-sm font-semibold leading-5">${s.name}</h3>
        <p class="text-xs text-gray-500">${s.subtitle}</p>
      </div>

      <!-- Bottom section: Number + tag + buttons -->
      <div class="mt-auto flex flex-col gap-2">
<div class="mb-3 flex flex-col items-start justify-between">
  <div class="text-2xl font-extrabold tracking-tight">${s.number}</div>
  <div class="mt-1 rounded-md bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700">${s.tag}</div>
</div>


        <div class="flex gap-2">
          <button class="copy-btn inline-flex flex-1 items-center justify-center gap-2 rounded-xl border border-gray-200 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-brand-500" data-id="${s.id}">
            Copy
          </button>
          <button class="call-btn inline-flex flex-1 items-center justify-center gap-2 rounded-xl bg-brand-600 px-3 py-2 text-sm font-semibold text-white hover:bg-brand-700 focus:outline-none focus:ring-2 focus:ring-brand-500" data-id="${s.id}">
            Call
          </button>
        </div>
      </div>
    </article>
  `).join('');
    }




    function wireEvents() {
      const cards = el('cards');
      cards.addEventListener('click', async (e) => {
        const favBtn = e.target.closest('.favorite-btn');
        const copyBtn = e.target.closest('.copy-btn');
        const callBtn = e.target.closest('.call-btn');

        if (favBtn) {
          const id = favBtn.dataset.id;
          if (favorites.has(id)) {
            favorites.delete(id);
          } else {
            favorites.add(id);
          }
          favBtn.innerHTML = heartButtonSVG(favorites.has(id));
          updateCounters();
        }

        if (copyBtn) {
          const id = copyBtn.dataset.id;
          const service = services.find(s => s.id === id);
          try {
            if (navigator.clipboard && navigator.clipboard.writeText) {
              await navigator.clipboard.writeText(service.number);
            } else {
              const tmp = document.createElement('input');
              tmp.value = service.number;
              document.body.appendChild(tmp);
              tmp.select();
              document.execCommand('copy');
              document.body.removeChild(tmp);
            }
            alert(`Copied ${service.number} for ${service.name}`);
            copies += 1;
            updateCounters();
          } catch (err) {
            alert('Copy failed. Please copy manually: ' + service.number);
          }
        }

        if (callBtn) {
          const id = callBtn.dataset.id;
          const service = services.find(s => s.id === id);

          if (coins < 20) {
            alert('Not enough coins. Each call costs 20 coins.');
            return;
          }
          coins -= 20;
          updateCounters();

          alert(`Calling ${service.name} ( ${service.number} )`);
          const time = formatTime(new Date());
          addHistory(service, time);
        }
      });

      el('clearHistory').addEventListener('click', () => {
        const list = el('historyList');
        list.innerHTML = '<li class="text-xs text-gray-500">No calls yet. Make a call to see history.</li>';
      });
    }

    function addHistory(service, time) {
      const list = el('historyList');
      if (list.firstElementChild && list.firstElementChild.textContent.includes('No calls yet')) {
        list.innerHTML = '';
      }
      const li = document.createElement('li');
      li.className = 'rounded-xl border border-gray-100 p-3 hover:bg-gray-50';
      li.innerHTML = `
        <div class="flex items-center justify-between">
          <div>
            <div class="text-sm font-medium">${service.name}</div>
            <div class="text-xs text-gray-500">${service.number}</div>
          </div>
          <div class="text-xs text-gray-400">${time}</div>
        </div>
      `;
      list.prepend(li);
    }

    // Init
    renderCards();
    wireEvents();
    updateCounters();

  </script>

</body>

</html>